# server {
#     index index.php index.html;
#     server_name vasco-revolution.local;
#     error_log  /var/log/nginx/error.log;
#     access_log /var/log/nginx/access.log;
#     root /code;
#     client_max_body_size 128M;
#     fastcgi_read_timeout 300;
#     fastcgi_buffers 16 16k;
#     fastcgi_buffer_size 32k;

#     location = /favicon.ico {
#         log_not_found off;
#         access_log off;
#     }

#     location = /robots.txt {
#         auth_basic off;
#         allow all;
#         log_not_found off;
#         access_log off;
#     }   


#     ##
#     # Gzip Settings
#     ##

#     gzip on;
#     gzip_disable "msie6";
#     gzip_vary on;
#     gzip_proxied any;
#     gzip_comp_level 1;
#     gzip_buffers 16 8k;
#     gzip_http_version 1.0;
#     gzip_types application/json text/css application/javascript;

#     rewrite ^/api/?(.*)$ /webservice/dispatcher.php?url=$1 last;
#     rewrite ^/([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$1$2$3.jpg last;
#     rewrite ^/([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$1$2$3$4.jpg last;
#     rewrite ^/([0-9])([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$3/$1$2$3$4$5.jpg last;
#     rewrite ^/([0-9])([0-9])([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$3/$4/$1$2$3$4$5$6.jpg last;
#     rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$3/$4/$5/$1$2$3$4$5$6$7.jpg last;
#     rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$1$2$3$4$5$6$7$8.jpg last;
#     rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$7/$1$2$3$4$5$6$7$8$9.jpg last;
#     rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$7/$8/$1$2$3$4$5$6$7$8$9$10.jpg last;
#     rewrite ^/c/([0-9]+)(-[.*_a-zA-Z0-9-]*)(-[0-9]+)?/.+.jpg$ /img/c/$1$2$3.jpg last;
#     rewrite ^/c/([a-zA-Z_-]+)(-[0-9]+)?/.+.jpg$ /img/c/$1$2.jpg last;
#     rewrite ^/images_ie/?([^/]+).(jpe?g|png|gif)$ /js/jquery/plugins/fancybox/images/$1.$2 last;
#     rewrite ^/order$ /index.php?controller=order last;

#     location /admin-dev/ {                           #Change this to your admin folder
#         if (!-e $request_filename) {
#             rewrite ^/.*$ /admin-dev/index.php last; #Change this to your admin folder
#         }
#     }
#     location / {
#         if (!-e $request_filename) {
#             rewrite ^/.*$ /index.php last;
#         }        
#     }

#     location ~ \.php$ {
#         try_files $uri =404;
#         fastcgi_split_path_info ^(.+\.php)(/.+)$;
#         fastcgi_pass php:9000;
#         fastcgi_index index.php;
#         include fastcgi_params;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param PATH_INFO $fastcgi_path_info;
#     }

# }

# server {
#     index index.php index.html;
#     server_name magento.local;
#     root /var/www/magento;
#     # client_max_body_size 128M;
#     # fastcgi_read_timeout 300;
#     # fastcgi_buffers 16 16k;
#     # fastcgi_buffer_size 32k;
#     location ~ \.php$ {
#         try_files $uri =404;
#         fastcgi_split_path_info ^(.+\.php)(/.+)$;
#         fastcgi_pass php:9000;
#         fastcgi_index index.php;
#         include fastcgi_params;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param PATH_INFO $fastcgi_path_info;
#     }
# }

upstream fastcgi_backend {
  server  php:9000;
}
  server {
    server_name magento.local;
    set $MAGE_ROOT /var/www/magento;
    set $MAGE_DEBUG_SHOW_ARGS 1;
    include /var/www/magento/nginx.conf.sample;
  }